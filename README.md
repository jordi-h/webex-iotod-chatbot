# üß† IoT Operations Dashboard NLP Chatbot
This project leverages the **MindMeld AI Conversational Platform** to power an **NLP chatbot** integrated with **Cisco Webex**, built to assist with **Edge Device Management (EDM)** in **IoT Operations Dashboard (IoT OD)**.


> ‚ö†Ô∏è **Deprecated**: This project is no longer maintained and has been replaced by the [Webex CCV Chatbot](https://github.com/jordi-h/webex-cybervision-chatbot.git).  
> Some features may be incomplete.

> üîí **IoT OD is no longer available**: Authentication and other platform-specific components are disabled.  
> This project is intended for **experimental use with MindMeld**, not for production deployment.

---

## üìö Table of Contents

- [Required Specifications](#required-specifications)
- [Bot Creation](#bot-creation)
- [Webhook & Tunnel Setup](#webhook--tunnel-setup)
- [Docker Setup](#docker-setup)
- [Clone the Repository](#clone-the-repository)
- [Launch the App Containerized](#launch-the-app-containerized)
- [Launch the App Locally](#launch-the-app-locally)
  - [Install Python 3.7](#install-python-37)
  - [Setup Python Virtualenv](#setup-python-virtualenv)
  - [Docker Compose for Local Services](#docker-compose-for-local-services)
  - [Install Python Dependencies](#install-python-dependencies)
  - [Train the MindMeld Models](#train-the-mindmeld-models)
  - [Start the App](#start-the-app)
  - [Test the Bot](#test-the-bot)
- [Custom Configurations](#custom-configurations)
- [License](#license)

---

> üí° **Before starting**, ensure your system meets these specifications:
>
> - **OS**: Ubuntu 16 or higher (20.04 or 22.04 recommended)  
> - **CPU**: 8 GB or more  
> - **Network**: Must allow HTTPS traffic  

---

# ü§ñ Bot Creation

1. [Create a Webex bot](https://developer.webex.com/my-apps/new/bot) by specifying:
   - **Name**
   - **Username**
   - **Icon**
   - **Description**

2. After creation, copy and securely store the **bot access token**.

---

# üåê Webhook & Tunnel Setup

## üîå Start a Secure Tunnel with Ngrok

> ‚ö†Ô∏è Ngrok is not recommended for production use.  
> It is used here for simplicity in local development.

```bash
ngrok http 8080
````

Use the public HTTPS URL generated by Ngrok as the **webhook target URL**.

## üîó Setup Webhooks

Use [Webex webhooks](https://developer.webex.com/docs/webhooks) to trigger the bot when messages or card actions occur.

Example webhook configuration:

```json
{
  "items": [
    {
      "id": "<some-id>",
      "name": "message-webhook",
      "targetUrl": "https://your-url.com/message",
      "resource": "messages",
      "event": "created"
    },
    {
      "id": "<some-id>",
      "name": "card-webhook",
      "targetUrl": "https://your-url.com/card",
      "resource": "attachmentActions",
      "event": "created"
    }
  ]
}
```

Once webhooks are set, your bot is ready to be added to Webex spaces.

---

# üê≥ Docker Setup

Install Docker by running the setup script:

```bash
bash scripts/install_docker.sh
```

---

# üêà‚Äç‚¨õ Clone the Repository

```bash
git clone git@github.com:jordi-h/webex-iotod-chatbot.git
cd webex-iotod-chatbot
```

---

# üåê Launch the App Containerized [Deprecated ‚Äì Not Guaranteed to Work]

Start the containerized app with:

```bash
docker compose -f docker/docker-compose.yml up -d
```

---

# üñ•Ô∏è Launch the App Locally

## üêç Install Python 3.7

```bash
sudo apt update
sudo add-apt-repository ppa:deadsnakes/ppa -y
sudo apt install python3.7 python3.7-venv -y
python3.7 --version
```

## üîß Setup Python Virtualenv

```bash
sudo apt install virtualenv -y
virtualenv -p python3.7 .
source bin/activate
```

## üê≥ Docker Compose for Local Services

```bash
docker compose -f docker/docker-compose-local.yml up -d
docker ps -a  # (optional) Verify containers are running
```

## üì¶ Install Python Dependencies

```bash
pip install --no-cache-dir -r requirements.txt
```

## üß† Train the MindMeld Models

```bash
python scripts/train.py
```

> ‚è±Ô∏è Training time depends on model complexity and hardware.
> Models may be trained on CPU or GPU.

## ‚ñ∂Ô∏è Start the App

Ensure `main.py` is listening on the correct port:

```python
port_number = 8080
server.run(host='0.0.0.0', port=port_number)
```

Then run:

```bash
python main.py --env dev
```

## üß™ Test the Bot

```bash
python -m webex-iotod-bot build       # Build the bot
python -m webex-iotod-bot converse    # Test interactively
python -m webex-iotod-bot clean       # Clear Elastic DB
```

---

# ‚öôÔ∏è Custom Configurations

You can customize NLP behavior in `config.py`.
For more options, see the [MindMeld Documentation](https://www.mindmeld.com/docs/index.html).

---

## üìÑ License

This project is licensed under the [MIT License](LICENSE).

---